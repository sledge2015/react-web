# ç¾è‚¡æŠ•èµ„ç®¡ç†ç³»ç»Ÿ - æŠ€æœ¯æ–‡æ¡£

## ğŸ“– ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
3. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
4. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
5. [æ ¸å¿ƒåŠŸèƒ½æ¨¡å—](#æ ¸å¿ƒåŠŸèƒ½æ¨¡å—)
6. [APIè®¾è®¡](#apiè®¾è®¡)
7. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
8. [è®¤è¯ä¸æƒé™ç³»ç»Ÿ](#è®¤è¯ä¸æƒé™ç³»ç»Ÿ)
9. [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)
10. [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
11. [æµ‹è¯•ç­–ç•¥](#æµ‹è¯•ç­–ç•¥)
12. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
13. [å®‰å…¨è€ƒè™‘](#å®‰å…¨è€ƒè™‘)
14. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

---

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®åç§°
ç¾è‚¡æŠ•èµ„ç®¡ç†ç³»ç»Ÿ (US Stock Investment Management System)

### é¡¹ç›®æè¿°
ä¸€ä¸ªç°ä»£åŒ–çš„Webåº”ç”¨ç¨‹åºï¼Œä¸ºæŠ•èµ„è€…æä¾›ç¾è‚¡ç›‘æ§ã€æŠ•èµ„ç»„åˆç®¡ç†å’Œå¸‚åœºåˆ†æåŠŸèƒ½ã€‚ç³»ç»Ÿæ”¯æŒå¤šç”¨æˆ·è§’è‰²ï¼Œå…·å¤‡å®Œæ•´çš„ç®¡ç†å‘˜æ§åˆ¶å°å’Œç”¨æˆ·æƒé™ç®¡ç†ã€‚

### æ ¸å¿ƒç‰¹æ€§
- ğŸ“ˆ **å®æ—¶è‚¡ç¥¨ç›‘æ§** - æ”¯æŒæ·»åŠ ã€åˆ é™¤ã€æœç´¢è‚¡ç¥¨
- ğŸ‘¥ **å¤šç”¨æˆ·ç³»ç»Ÿ** - æ”¯æŒç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·è§’è‰²
- âš™ï¸ **ç®¡ç†å‘˜æ§åˆ¶å°** - ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿè®¾ç½®ã€æ´»åŠ¨æ—¥å¿—
- ğŸ”’ **å®‰å…¨è®¤è¯** - JWT Tokenè®¤è¯å’ŒåŸºäºè§’è‰²çš„æƒé™æ§åˆ¶
- ğŸ“± **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- ğŸ¨ **ç°ä»£åŒ–UI** - Material Designé£æ ¼çš„ç”¨æˆ·ç•Œé¢

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**: React 18.x + TypeScript
- **çŠ¶æ€ç®¡ç†**: React Hooks (useState, useContext, useEffect)
- **æ ·å¼**: CSS3 + è‡ªå®šä¹‰ç»„ä»¶æ ·å¼
- **æ„å»ºå·¥å…·**: Create React App
- **ä»£ç è§„èŒƒ**: ESLint + Prettier
- **ç±»å‹æ£€æŸ¥**: TypeScript 4.x

### åç«¯æŠ€æœ¯ (å»ºè®®)
- **è¿è¡Œæ—¶**: Node.js 18+
- **æ¡†æ¶**: Express.js æˆ– Fastify
- **æ•°æ®åº“**: PostgreSQL æˆ– MongoDB
- **è®¤è¯**: JWT (JSON Web Tokens)
- **API**: RESTful API è®¾è®¡

### å¼€å‘å·¥å…·
- **ç‰ˆæœ¬æ§åˆ¶**: Git
- **åŒ…ç®¡ç†**: npm æˆ– yarn
- **å¼€å‘ç¯å¢ƒ**: VS Code
- **è°ƒè¯•å·¥å…·**: React Developer Tools

---

## ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (React)   â”‚â—„â”€â”€â–ºâ”‚  åç«¯ (Node.js)  â”‚â—„â”€â”€â–ºâ”‚   æ•°æ®åº“ (PG)    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ç”¨æˆ·ç•Œé¢       â”‚    â”‚ â€¢ RESTful API   â”‚    â”‚ â€¢ ç”¨æˆ·æ•°æ®       â”‚
â”‚ â€¢ çŠ¶æ€ç®¡ç†       â”‚    â”‚ â€¢ JWTè®¤è¯       â”‚    â”‚ â€¢ è‚¡ç¥¨æ•°æ®       â”‚
â”‚ â€¢ æƒé™æ§åˆ¶       â”‚    â”‚ â€¢ æƒé™éªŒè¯       â”‚    â”‚ â€¢ æ—¥å¿—è®°å½•       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—æ¶æ„
```
App
â”œâ”€â”€ è®¤è¯æ¨¡å— (Auth)
â”‚   â”œâ”€â”€ ç™»å½•/æ³¨å†Œç»„ä»¶
â”‚   â”œâ”€â”€ ç”¨æˆ·çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ æƒé™éªŒè¯
â”œâ”€â”€ è‚¡ç¥¨ç®¡ç†æ¨¡å— (Stocks)
â”‚   â”œâ”€â”€ è‚¡ç¥¨åˆ—è¡¨
â”‚   â”œâ”€â”€ æœç´¢æ’åº
â”‚   â””â”€â”€ æ·»åŠ åˆ é™¤
â”œâ”€â”€ ç®¡ç†å‘˜æ¨¡å— (Admin)
â”‚   â”œâ”€â”€ ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ ç³»ç»Ÿè®¾ç½®
â”‚   â””â”€â”€ æ´»åŠ¨æ—¥å¿—
â””â”€â”€ å…¬å…±ç»„ä»¶ (Common)
    â”œâ”€â”€ ç¡®è®¤å¯¹è¯æ¡†
    â”œâ”€â”€ Toasté€šçŸ¥
    â””â”€â”€ åŠ è½½çŠ¶æ€
```

---

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/           # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ AdminPanel.tsx   # ç®¡ç†å‘˜é¢æ¿
â”‚   â”œâ”€â”€ AdminPanel.css   # ç®¡ç†å‘˜é¢æ¿æ ·å¼
â”‚   â””â”€â”€ index.ts         # ç»„ä»¶å¯¼å‡º
â”œâ”€â”€ hooks/               # è‡ªå®šä¹‰Hooks
â”‚   â”œâ”€â”€ useAuth.ts       # è®¤è¯Hook
â”‚   â”œâ”€â”€ useLocalStorage.ts # æœ¬åœ°å­˜å‚¨Hook
â”‚   â””â”€â”€ index.ts         # Hookså¯¼å‡º
â”œâ”€â”€ pages/               # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ Dashboard/       # ä¸»ä»ªè¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â””â”€â”€ Dashboard.css
â”‚   â”œâ”€â”€ Login/           # ç™»å½•é¡µé¢
â”‚   â””â”€â”€ Register/        # æ³¨å†Œé¡µé¢
â”œâ”€â”€ auth/                # è®¤è¯ç›¸å…³ç»„ä»¶
â”‚   â”œâ”€â”€ LoginForm.tsx    # ç™»å½•è¡¨å•
â”‚   â”œâ”€â”€ RegisterForm.tsx # æ³¨å†Œè¡¨å•
â”‚   â””â”€â”€ AuthForms.css    # è®¤è¯è¡¨å•æ ·å¼
â”œâ”€â”€ services/            # APIæœåŠ¡
â”‚   â”œâ”€â”€ api.ts          # APIåŸºç¡€é…ç½®
â”‚   â”œâ”€â”€ authService.tsx  # è®¤è¯æœåŠ¡
â”‚   â””â”€â”€ stockService.ts # è‚¡ç¥¨æœåŠ¡
â”œâ”€â”€ types/               # TypeScriptç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ stock.ts        # è‚¡ç¥¨ç›¸å…³ç±»å‹
â”‚   â””â”€â”€ index.ts        # ç±»å‹å¯¼å‡º
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ constants.ts    # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ helpers.ts      # è¾…åŠ©å‡½æ•°
â”‚   â””â”€â”€ validation.ts   # éªŒè¯å‡½æ•°
â”œâ”€â”€ App.tsx             # æ ¹ç»„ä»¶
â”œâ”€â”€ App.css             # å…¨å±€æ ·å¼
â”œâ”€â”€ index.tsx           # åº”ç”¨å…¥å£
â””â”€â”€ index.css           # åŸºç¡€æ ·å¼
```

---

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. è®¤è¯ç³»ç»Ÿ (`useAuth`)

#### åŠŸèƒ½æè¿°
æä¾›å®Œæ•´çš„ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†åŠŸèƒ½ã€‚

#### æ ¸å¿ƒæ–¹æ³•
```typescript
interface AuthContextType {
  user: User | null;
  isLoading: boolean;
  login: (data: LoginRequest) => Promise<boolean>;
  logout: () => void;
  register: (data: RegisterRequest) => Promise<boolean>;
  isAdmin: () => boolean;
  hasPermission: (permission: string) => boolean;
}
```

#### å†…ç½®è´¦æˆ·
- **ç®¡ç†å‘˜**: `admin` / `admin123`
- **æ¼”ç¤ºç”¨æˆ·**: `demo` / `demo123`
- **æŠ•èµ„è€…**: `investor` / `demo123`

#### æƒé™ç³»ç»Ÿ
```typescript
const PERMISSIONS = {
  admin: [
    'user.create', 'user.read', 'user.update', 'user.delete',
    'stock.create', 'stock.read', 'stock.update', 'stock.delete',
    'system.config', 'system.logs', 'analytics.view'
  ],
  user: [
    'stock.read', 'stock.create', 'stock.update', 'portfolio.manage'
  ]
};
```

### 2. è‚¡ç¥¨ç®¡ç†æ¨¡å—

#### åŠŸèƒ½æè¿°
ç®¡ç†ç”¨æˆ·çš„è‚¡ç¥¨ç›‘æ§åˆ—è¡¨ï¼Œæ”¯æŒæ·»åŠ ã€åˆ é™¤ã€æœç´¢å’Œæ’åºã€‚

#### æ ¸å¿ƒåŠŸèƒ½
- **å®æ—¶æ•°æ®åˆ·æ–°**: æ¯30ç§’è‡ªåŠ¨åˆ·æ–°è‚¡ç¥¨æ•°æ®
- **æœç´¢è¿‡æ»¤**: æ”¯æŒæŒ‰è‚¡ç¥¨ä»£ç å’Œå…¬å¸åç§°æœç´¢
- **å¤šç»´åº¦æ’åº**: æ”¯æŒæŒ‰ä»·æ ¼ã€æ¶¨è·Œå¹…ã€å¸‚å€¼ç­‰æ’åº
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡æ·»åŠ å’Œåˆ é™¤è‚¡ç¥¨

#### æ•°æ®æ ¼å¼
```typescript
interface DataItem {
  id: string;
  symbol: string;           // è‚¡ç¥¨ä»£ç 
  companyName: string;      // å…¬å¸åç§°
  price: number;            // å½“å‰ä»·æ ¼
  change: number;           // æ¶¨è·Œé¢
  changePercent: number;    // æ¶¨è·Œå¹…
  volume: number;           // æˆäº¤é‡
  marketCap: number;        // å¸‚å€¼
  lastUpdated: string;      // æœ€åæ›´æ–°æ—¶é—´
}
```

### 3. ç®¡ç†å‘˜æ§åˆ¶å°

#### ç³»ç»Ÿæ¦‚è§ˆ
- ç”¨æˆ·ç»Ÿè®¡ä¿¡æ¯
- ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
- æœ€è¿‘ç”¨æˆ·æ´»åŠ¨

#### ç”¨æˆ·ç®¡ç†
- æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨
- é‡ç½®ç”¨æˆ·å¯†ç 
- åˆ é™¤ç”¨æˆ·è´¦æˆ·
- ç”¨æˆ·è§’è‰²ç®¡ç†

#### ç³»ç»Ÿè®¾ç½®
- æ•°æ®åˆ·æ–°é—´éš”é…ç½®
- å®‰å…¨è®¾ç½®
- ç³»ç»Ÿç»´æŠ¤æ“ä½œ

#### æ´»åŠ¨æ—¥å¿—
- ç”¨æˆ·æ“ä½œè®°å½•
- ç³»ç»Ÿäº‹ä»¶æ—¥å¿—
- æ—¥å¿—è¿‡æ»¤å’Œæœç´¢

---

## APIè®¾è®¡

### è®¤è¯æ¥å£

#### POST /api/auth/login
ç”¨æˆ·ç™»å½•

**è¯·æ±‚ä½“**:
```json
{
  "username": "string",
  "password": "string"
}
```

**å“åº”**:
```json
{
  "success": true,
  "user": {
    "id": "string",
    "username": "string",
    "email": "string",
    "role": "admin|user"
  },
  "token": "jwt_token_string"
}
```

#### POST /api/auth/register
ç”¨æˆ·æ³¨å†Œ

**è¯·æ±‚ä½“**:
```json
{
  "username": "string",
  "email": "string",
  "password": "string"
}
```

#### GET /api/auth/validate
éªŒè¯Token

**Headers**: `Authorization: Bearer <token>`

### è‚¡ç¥¨æ¥å£

#### GET /api/stocks
è·å–ç”¨æˆ·è‚¡ç¥¨åˆ—è¡¨

**Headers**: `Authorization: Bearer <token>`

**å“åº”**:
```json
{
  "success": true,
  "data": [
    {
      "id": "string",
      "symbol": "AAPL",
      "companyName": "Apple Inc.",
      "price": 150.25,
      "change": 2.15,
      "changePercent": 1.45,
      "volume": 50000000,
      "marketCap": 2500000000000,
      "lastUpdated": "2025-08-20T10:30:00Z"
    }
  ]
}
```

#### POST /api/stocks
æ·»åŠ è‚¡ç¥¨åˆ°ç›‘æ§åˆ—è¡¨

**è¯·æ±‚ä½“**:
```json
{
  "symbol": "AAPL"
}
```

#### DELETE /api/stocks/:id
ä»ç›‘æ§åˆ—è¡¨åˆ é™¤è‚¡ç¥¨

### ç®¡ç†å‘˜æ¥å£

#### GET /api/admin/users
è·å–æ‰€æœ‰ç”¨æˆ· (ä»…ç®¡ç†å‘˜)

#### PUT /api/admin/users/:id/reset-password
é‡ç½®ç”¨æˆ·å¯†ç  (ä»…ç®¡ç†å‘˜)

#### DELETE /api/admin/users/:id
åˆ é™¤ç”¨æˆ· (ä»…ç®¡ç†å‘˜)

#### GET /api/admin/logs
è·å–ç³»ç»Ÿæ—¥å¿— (ä»…ç®¡ç†å‘˜)

---

## æ•°æ®åº“è®¾è®¡

### ç”¨æˆ·è¡¨ (users)
```sql
CREATE TABLE users (
  id VARCHAR(36) PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(100) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  role ENUM('admin', 'user') DEFAULT 'user',
  avatar VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  last_login TIMESTAMP
);
```

### è‚¡ç¥¨è¡¨ (stocks)
```sql
CREATE TABLE stocks (
  id VARCHAR(36) PRIMARY KEY,
  symbol VARCHAR(10) NOT NULL,
  company_name VARCHAR(255) NOT NULL,
  price DECIMAL(10, 2),
  change_amount DECIMAL(10, 2),
  change_percent DECIMAL(5, 2),
  volume BIGINT,
  market_cap BIGINT,
  last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_symbol (symbol)
);
```

### ç”¨æˆ·è‚¡ç¥¨å…³è”è¡¨ (user_stocks)
```sql
CREATE TABLE user_stocks (
  id VARCHAR(36) PRIMARY KEY,
  user_id VARCHAR(36) NOT NULL,
  stock_id VARCHAR(36) NOT NULL,
  added_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (stock_id) REFERENCES stocks(id) ON DELETE CASCADE,
  UNIQUE KEY unique_user_stock (user_id, stock_id)
);
```

### æ´»åŠ¨æ—¥å¿—è¡¨ (activity_logs)
```sql
CREATE TABLE activity_logs (
  id VARCHAR(36) PRIMARY KEY,
  user_id VARCHAR(36),
  action VARCHAR(100) NOT NULL,
  details TEXT,
  ip_address VARCHAR(45),
  user_agent TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL,
  INDEX idx_user_id (user_id),
  INDEX idx_created_at (created_at)
);
```

---

## è®¤è¯ä¸æƒé™ç³»ç»Ÿ

### JWT Tokenç»“æ„
```json
{
  "sub": "user_id",
  "username": "string",
  "role": "admin|user",
  "iat": 1634567890,
  "exp": 1634654290
}
```

### æƒé™éªŒè¯ä¸­é—´ä»¶
```javascript
const requirePermission = (permission) => {
  return (req, res, next) => {
    const user = req.user;
    if (!user || !hasPermission(user.role, permission)) {
      return res.status(403).json({ error: 'Permission denied' });
    }
    next();
  };
};
```

### å‰ç«¯æƒé™æ§åˆ¶
```typescript
const ProtectedComponent = () => {
  const { hasPermission } = useAuth();
  
  if (!hasPermission('user.manage')) {
    return <AccessDenied />;
  }
  
  return <UserManagement />;
};
```

---

## éƒ¨ç½²æŒ‡å—

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- PostgreSQL 13+ æˆ– MongoDB 5+
- nginx (ç”Ÿäº§ç¯å¢ƒ)
- PM2 (è¿›ç¨‹ç®¡ç†)

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# .env
NODE_ENV=production
PORT=3000
DATABASE_URL=postgresql://user:password@localhost:5432/stock_db
JWT_SECRET=your_jwt_secret_key
JWT_EXPIRE=24h
CORS_ORIGIN=https://yourdomain.com
```

### Dockeréƒ¨ç½²
```dockerfile
# Dockerfile
FROM node:18-alpine

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

EXPOSE 3000
CMD ["npm", "start"]
```

### Docker Compose
```yaml
version: '3.8'
services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - DATABASE_URL=postgresql://postgres:password@db:5432/stock_db
    depends_on:
      - db
  
  db:
    image: postgres:13
    environment:
      - POSTGRES_DB=stock_db
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
  
volumes:
  postgres_data:
```

### nginxé…ç½®
```nginx
server {
    listen 80;
    server_name yourdomain.com;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

---

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘ç¯å¢ƒæ­å»º

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd stock-management-system
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **ç¯å¢ƒé…ç½®**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥ç­‰
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm start
```

### ä»£ç è§„èŒƒ

#### TypeScripté…ç½®
```json
{
  "compilerOptions": {
    "target": "es5",
    "lib": ["dom", "dom.iterable", "es6"],
    "allowJs": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noFallthroughCasesInSwitch": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx"
  }
}
```

#### ESLintè§„åˆ™
```json
{
  "extends": [
    "react-app",
    "react-app/jest",
    "@typescript-eslint/recommended"
  ],
  "rules": {
    "no-restricted-globals": ["error", "confirm", "alert"],
    "@typescript-eslint/explicit-function-return-type": "off",
    "@typescript-eslint/no-explicit-any": "warn"
  }
}
```

### å¼€å‘æµç¨‹

1. **åŠŸèƒ½å¼€å‘**
   - åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
   - ç¼–å†™ç»„ä»¶å’Œæµ‹è¯•
   - æäº¤ä»£ç å®¡æŸ¥

2. **ä»£ç æäº¤è§„èŒƒ**
```bash
git commit -m "feat: æ·»åŠ è‚¡ç¥¨æœç´¢åŠŸèƒ½"
git commit -m "fix: ä¿®å¤ç™»å½•çŠ¶æ€æŒä¹…åŒ–é—®é¢˜"
git commit -m "docs: æ›´æ–°APIæ–‡æ¡£"
```

3. **å‘å¸ƒæµç¨‹**
   - åˆå¹¶åˆ°ä¸»åˆ†æ”¯
   - åˆ›å»ºå‘å¸ƒæ ‡ç­¾
   - éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

---

## æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
```typescript
// __tests__/useAuth.test.ts
import { renderHook, act } from '@testing-library/react';
import { useAuth } from '../hooks/useAuth';

describe('useAuth', () => {
  test('should login with valid credentials', async () => {
    const { result } = renderHook(() => useAuth());
    
    await act(async () => {
      const success = await result.current.login({
        username: 'admin',
        password: 'admin123'
      });
      expect(success).toBe(true);
    });
    
    expect(result.current.user).toBeTruthy();
    expect(result.current.isAdmin()).toBe(true);
  });
});
```

### é›†æˆæµ‹è¯•
```typescript
// __tests__/Dashboard.test.tsx
import { render, screen, fireEvent } from '@testing-library/react';
import { Dashboard } from '../pages/Dashboard';
import { AuthProvider } from '../hooks/useAuth';

test('should display stock list for authenticated user', () => {
  render(
    <AuthProvider>
      <Dashboard />
    </AuthProvider>
  );
  
  expect(screen.getByText('ç¾è‚¡æŠ•èµ„ç›‘æ§å°')).toBeInTheDocument();
  expect(screen.getByText('æ·»åŠ è‚¡ç¥¨')).toBeInTheDocument();
});
```

### E2Eæµ‹è¯• (Cypress)
```typescript
// cypress/integration/auth.spec.ts
describe('Authentication Flow', () => {
  it('should login and access dashboard', () => {
    cy.visit('/');
    cy.get('[data-testid=username]').type('admin');
    cy.get('[data-testid=password]').type('admin123');
    cy.get('[data-testid=login-button]').click();
    
    cy.url().should('include', '/dashboard');
    cy.get('[data-testid=user-welcome]').should('contain', 'admin');
  });
});
```

---

## æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–

1. **ä»£ç åˆ†å‰²**
```typescript
const AdminPanel = lazy(() => import('../components/AdminPanel'));

const Dashboard = () => {
  return (
    <Suspense fallback={<Loading />}>
      {showAdminPanel && <AdminPanel />}
    </Suspense>
  );
};
```

2. **å†…å­˜ä¼˜åŒ–**
```typescript
const useStockData = () => {
  const [data, setData] = useState([]);
  
  useEffect(() => {
    const interval = setInterval(fetchData, 30000);
    return () => clearInterval(interval); // æ¸…ç†å®šæ—¶å™¨
  }, []);
  
  return data;
};
```

3. **ç¼“å­˜ç­–ç•¥**
```typescript
const useCachedAPI = (url: string) => {
  const cache = useRef(new Map());
  
  const fetchData = useCallback(async () => {
    if (cache.current.has(url)) {
      return cache.current.get(url);
    }
    
    const data = await fetch(url).then(r => r.json());
    cache.current.set(url, data);
    return data;
  }, [url]);
  
  return fetchData;
};
```

### åç«¯ä¼˜åŒ–

1. **æ•°æ®åº“ç´¢å¼•**
```sql
CREATE INDEX idx_user_stocks_user_id ON user_stocks(user_id);
CREATE INDEX idx_stocks_symbol ON stocks(symbol);
CREATE INDEX idx_activity_logs_user_created ON activity_logs(user_id, created_at);
```

2. **APIç¼“å­˜**
```javascript
const redis = require('redis');
const client = redis.createClient();

const cacheMiddleware = (duration = 300) => {
  return async (req, res, next) => {
    const key = req.originalUrl;
    const cached = await client.get(key);
    
    if (cached) {
      return res.json(JSON.parse(cached));
    }
    
    res.sendResponse = res.json;
    res.json = (body) => {
      client.setex(key, duration, JSON.stringify(body));
      res.sendResponse(body);
    };
    
    next();
  };
};
```

---

## å®‰å…¨è€ƒè™‘

### å‰ç«¯å®‰å…¨

1. **XSSé˜²æŠ¤**
```typescript
const sanitizeInput = (input: string) => {
  return DOMPurify.sanitize(input);
};

const SafeComponent = ({ userInput }: { userInput: string }) => {
  return <div dangerouslySetInnerHTML={{ __html: sanitizeInput(userInput) }} />;
};
```

2. **CSRFé˜²æŠ¤**
```typescript
const apiCall = async (url: string, data: any) => {
  const token = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
  
  return fetch(url, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-CSRF-Token': token,
    },
    body: JSON.stringify(data),
  });
};
```

### åç«¯å®‰å…¨

1. **è¾“å…¥éªŒè¯**
```javascript
const { body, validationResult } = require('express-validator');

const validateLogin = [
  body('username').isLength({ min: 3 }).trim().escape(),
  body('password').isLength({ min: 6 }),
  (req, res, next) => {
    const errors = validationResult(req);
    if (!errors.isEmpty()) {
      return res.status(400).json({ errors: errors.array() });
    }
    next();
  }
];
```

2. **SQLæ³¨å…¥é˜²æŠ¤**
```javascript
// ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
const getUserByUsername = async (username) => {
  const query = 'SELECT * FROM users WHERE username = $1';
  const result = await db.query(query, [username]);
  return result.rows[0];
};
```

3. **å¯†ç å®‰å…¨**
```javascript
const bcrypt = require('bcrypt');

const hashPassword = async (password) => {
  const saltRounds = 12;
  return await bcrypt.hash(password, saltRounds);
};

const verifyPassword = async (password, hash) => {
  return await bcrypt.compare(password, hash);
};
```

---

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. TypeScriptç¼–è¯‘é”™è¯¯
**é—®é¢˜**: `TS2367: This comparison appears to be unintentional`

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// ä½¿ç”¨å¸ƒå°”å€¼æ›¿ä»£å­—ç¬¦ä¸²æ¯”è¾ƒ
const [showAdminPanel, setShowAdminPanel] = useState(false);
// è€Œä¸æ˜¯
const [currentView, setCurrentView] = useState<'stocks' | 'admin'>('stocks');
```

#### 2. è®¤è¯çŠ¶æ€ä¸¢å¤±
**é—®é¢˜**: åˆ·æ–°é¡µé¢åç”¨æˆ·ç™»å½•çŠ¶æ€ä¸¢å¤±

**è§£å†³æ–¹æ¡ˆ**:
```typescript
useEffect(() => {
  const token = localStorage.getItem('auth_token');
  const userData = localStorage.getItem('user_data');
  
  if (token && userData) {
    setUser(JSON.parse(userData));
  }
}, []);
```

#### 3. APIè¯·æ±‚å¤±è´¥
**é—®é¢˜**: CORSé”™è¯¯æˆ–401æœªæˆæƒ

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// ç¡®ä¿è¯·æ±‚å¤´åŒ…å«Token
const apiCall = async (url: string) => {
  const token = localStorage.getItem('auth_token');
  
  const response = await fetch(url, {
    headers: {
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json',
    },
  });
  
  if (response.status === 401) {
    // Tokenè¿‡æœŸï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ
    logout();
    return;
  }
  
  return response.json();
};
```

### æ—¥å¿—å’Œç›‘æ§

#### å‰ç«¯é”™è¯¯ç›‘æ§
```typescript
window.addEventListener('error', (event) => {
  console.error('Global error:', event.error);
  // å‘é€é”™è¯¯åˆ°ç›‘æ§æœåŠ¡
  sendErrorToMonitoring({
    message: event.error.message,
    stack: event.error.stack,
    url: window.location.href,
    userAgent: navigator.userAgent,
  });
});
```

#### åç«¯æ—¥å¿—ç³»ç»Ÿ
```javascript
const winston = require('winston');

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.json(),
  transports: [
    new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),
    new winston.transports.File({ filename: 'logs/combined.log' }),
  ],
});

app.use((req, res, next) => {
  logger.info(`${req.method} ${req.url}`, {
    ip: req.ip,
    userAgent: req.get('User-Agent'),
  });
  next();
});
```

---

## é™„å½•

### æœ‰ç”¨çš„å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# è¿è¡Œæµ‹è¯•
npm test

# ä»£ç æ ¼å¼åŒ–
npm run format

# ç±»å‹æ£€æŸ¥
npm run type-check

# ç”ŸæˆAPIæ–‡æ¡£
npm run docs

# æ•°æ®åº“è¿ç§»
npm run migrate

# æ¸…é™¤ç¼“å­˜
npm run clean
```


### ç›¸å…³èµ„æº

- [Reactå®˜æ–¹æ–‡æ¡£](https://reactjs.org/docs)
- [TypeScriptæ‰‹å†Œ](https://www.typescriptlang.org/docs)
- [Material DesignæŒ‡å—](https://material.io/design)
- [JWT.io](https://jwt.io/)
- [PostgreSQLæ–‡æ¡£](https://www.postgresql.org/docs)

### è”ç³»ä¿¡æ¯

- **é¡¹ç›®ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ
- **æŠ€æœ¯æ”¯æŒ**: tech-support@company.com
- **æ–‡æ¡£æ›´æ–°**: 2025å¹´8æœˆ20æ—¥

---

*æœ¬æ–‡æ¡£å°†æŒç»­æ›´æ–°ï¼Œè¯·å®šæœŸæŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ã€‚*
